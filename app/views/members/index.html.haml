#member-list
  %h1 Listing members

  -if can? :create, @members
    .pull-right= link_to content_tag( :span, nil, class: 'glyphicon glyphicon-plus') + ' Add New Member', new_member_path

  .table-responsive
    %table.table.table-striped
      %tr
        %th Name
        %th Phone(s)
        %th Email
        - if can? :view, @members
          %th Role(s)
        - if can? :manage, @members
          %th

      - @members.each do |member|
        %tr
          %td.name= member.fullname
          %td.phone
            - member.phones.by_type.each do |phone|
              = link_to phone.listing, phone.as_tel_link
              %br
          %td.email= mail_to member.email

          - if can? :view, @members
            %td= member.roles.by_name.map{|r| r.name}.join(', ')

          - if can? :manage, @members
            %td
              = render 'partials/admin_commands', klass: member
              -#.btn-group.btn-group-sm
              -#  = button_tag class: 'btn btn-default' do
              -#    = link_to content_tag( :span, '', class: 'glyphicon glyphicon-eye-open' ), member
              -#  = button_tag class: 'btn btn-default' do
              -#    = link_to content_tag( :span, '', class: 'glyphicon glyphicon-pencil' ), edit_member_path(member)
              -#  = button_tag class: 'btn btn-default' do
              -#    = link_to member, :method => :delete, data: { confirm: 'Are you sure?' } do
              -#      %span.glyphicon.glyphicon-trash

  = will_paginate @members, renderer: BootstrapPagination::Rails
  %br

