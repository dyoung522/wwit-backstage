.table-responsive
  %table.table.table-striped
    %thead
      %tr
        %th Name
        %th Phone(s)
        %th Email
        - if can? :manage, @members
          %th.hidden-xs.hidden-sm Role(s)
        %th
          - if can? :create, @members
            .text-left= link_to content_tag( :span, nil, class: 'glyphicon glyphicon-plus') + ' Add New Member', new_member_path

    %tbody
      - @members.each do |member|
        %tr
          %td.name
            - if member.inactive?
              %span.inactive{ class: 'glyphicon glyphicon-ban-circle' }
            = link_to member.fullname, member_path(member)
          %td.phone
            - member.phones.by_type.each do |phone|
              = link_to phone.listing, phone.as_tel_link
              %br
          %td.email= mail_to member.email

          - if can? :manage, @members
            %td.hidden-xs.hidden-sm= member.roles.by_name.map{|r| r.name}.join(', ')

          %td= render 'partials/admin_commands', klass: member

