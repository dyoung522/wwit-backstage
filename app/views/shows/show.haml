
.row
  .col-md-5
    %h1
      = @show.human_date
      %small= @show.name
  - if @show.actors.any?
    - if can? :cast, @show
      .col-md-3.pad-top-20
        = link_to get_icon(:email, text: @show.cast? ? "Sent at #{@show.casting_sent}" : 'Send Cast Announcement' ),
                  show_casting_announcement_path(@show),
                  class: 'btn btn-default',
                  method: :post,
                  title: ( 'Re-Send?' if @show.cast? ),
                  data: { disable_with: 'Sending emails, please wait', confirm: ('Re-Send Announcement?' if @show.cast?) }
    .col-md-2.pad-top-20
      = link_to get_icon(:email, text: 'Email Cast'),
        new_message_path( subject: "Re: #{@show.human_date}", members: @show.actors.map(&:id) ),
        class: 'btn btn-default'
  .col-md-2.pad-top-20
    - if @show.crew_members.any?
      = link_to get_icon(:email, text: 'Email Crew'),
        new_message_path( subject: "Re: #{@show.date}", members: @show.crew_members.map(&:id) ),
        class: 'btn btn-default'

%ul.list-inline
  %li Show Time: #{format_time_ampm @show.showtime}
  %li Call Time: #{format_time_ampm @show.calltime}

.row
  .col-md-6
    .box
      .row
        .col-md-2 MC
        .col-md-10= link_to_member @show.mc
      .row
        %br
        .col-md-2 Cast
        .col-md-10
          - @actors.each do |cast|
            .row
              .col-md-6= link_to_member( cast )
              .col-md-6.hidden-xs= cast.roles.castable.map { |r| r.title }.to_sentence

  .col-md-6
    .box
      .row
        .col-md-2 Crew
        .col-md-10
          - @shifts.each do |shift|
            .row
              .col-sm-6.hidden-xs
                = shift.skill.name
                = ' (T)' if shift.training?
              .col-xs-4.visible-xs
                = shift.skill.code
                = ' (T)' if shift.training?
              .col-xs-8.col-sm-6= link_to_member shift.member

.row
  .col-md-12
    .well
      Notes
      = render 'notes/notes', klass: @show
      = render 'notes/form'

- if can? :update, @show
  .pull-right= link_to get_icon(:edit, text: 'Edit'), edit_show_path(@show)
= link_to get_icon(:back, text: 'Back'), shows_path( date: session[:date_params] )
